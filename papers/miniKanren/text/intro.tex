\section{Introduction}

The core feature of the family of relational programming languages \mk{}\footnote{\mk{} language web site: \url{http://minikanren.org}} is their ability to run a program in different directions.
Having specified a relation for adding two numbers, one can also compute the substraction of two numbers or find all pairs of numbers which can be summed up to get the given one.
By running a relational interpreter \emph{backwards} one can obtain a \emph{solver}~\cite{lozov2019relational} thus solving a much more complicated problem.

The search employed in \mk{} is complete which means that every answer will be found, although it may take a long time.
The promise of \mk{} falls short when speaking of performance.
The running time of a program in \mk{} is highly unpredictable and varies greatly for different directions.
What is even worse, it depends on the order of the relation calls within a program.
One order can be good for one direction, but slow the computation drastically in the different direction.

Specialization or partial evaluation~\cite{jonesbook} is a technique aimed at improving performance of a program given some information about it beforehand.
It may either be a known value of some argument, its structure (i.e. the length of an input list) or, in case of relational program, --- the direction in which it is intended to be run.
An earlier paper~\cite{lozov2019relational} showed that \emph{conjunctive partial deduction}~\cite{de1999conjunctive} can sometimes improve the performance of \mk{} programs.
Unfortunately, it may also not affect the running time of a program or even make it slower.

Control issues in partial deduction of logic programming language \pro{} have been studied before~\cite{leuschel2002logic}.
The ideas described there are aimed at left-to-right evaluation strategy of \pro{}.
Since the search in \mk{} is complete, it is safe to reorder come relation calls within the goal for better performance.
While sometimes conjunctive partial deduction gives great perforamnce boost, sometimes it does not behave as well as it could have been.

In this paper we show on examples some issues which face conjunctive partial deduction.
We also describe a novel approach to partial deduction of a relational programming language \mk{}.
We compare it to the existing specialization algorithms on several programs and discuss why some \mk{} programs run slower after specialization.
